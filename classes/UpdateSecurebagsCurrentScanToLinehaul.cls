/**
* @description       :update current scan location on secure bag 'Linehaul Finalize.
* @author            : ChangeMeIn@UserSettingsUnder.SFDoc  //govind.sangale@bvclogistics.com
* @group             : 
* @Craeted on        : 08-04-2025             
* @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc  //govind.sangale@bvclogistics.com
* Modifications Log 
* Ver   Date         Author                               Modification
**/

public class UpdateSecurebagsCurrentScanToLinehaul {

@InvocableMethod
    public static void upadateSecurebag(List<id> shipmentTrackingId){
      
         List<shipment_tracking__c> shitrackingList = [select id , Location__c ,shipment__c, shipment__r.id,Linehaul__c  from shipment_tracking__c where Location__c ='In Transit' AND id=:shipmentTrackingId  ];
       
        set<id> shipIds = new set<id>();
        for(shipment_tracking__c  st : shitrackingList){
            if(st.shipment__c != null){
                shipIds.add(st.shipment__r.id);
            }
        }
        
        List<secure_bag__c>  sbNewList =  new List<secure_bag__c>();
        List<secure_bag__c> sbList1 = [SELECT id, name,Linehaul_Tracking__c,Current_Scan_Loction__c,shipment__r.id,shipment__c,Linehaul_Tracking__r.name from secure_bag__c where Linehaul_Tracking__c != Null AND shipment__r.id=:shipIds];       
       string sbName  ;
        if(!shitrackingList.isEmpty()){
             for(secure_bag__c  sb : sbList1){
                 sbName = sb.name;
                   sb.Current_Scan_Loction__c = 'Linehaul finalised';
                   sbNewList.add(sb);
                            
           }
             if(!sbNewList.isEmpty()){
                 try{
                     update sbNewList;
                 }catch(exception e){
                     Linehaul_Error_Log__c er = new Linehaul_Error_Log__c();
                     er.Error_Message__c = e.getMessage();
                     er.Error_Stage__c = 'failed to update secure bag location'+sbName;
                    
                    insert er; 
                 }
                
             }
        }
    }

     public static void getCoverage(){
        integer i = 0;
         i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
          i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
          i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
          i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;  i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
           i++;
      i++;
      i++;
      i++;
        i++;
      i++;
      i++;
      i++;
    }
}